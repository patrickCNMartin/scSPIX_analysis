Oct-21 12:26:35.728 [main] DEBUG nextflow.cli.Launcher - $> /nix/store/53hvv2d0ypg7viniif61sxzfzy3n6jgc-nextflow-22.10.6/bin/.nextflow-wrapped run main.nf
Oct-21 12:26:35.771 [main] INFO  nextflow.cli.CmdRun - N E X T F L O W  ~  version 22.10.6
Oct-21 12:26:35.783 [main] DEBUG nextflow.plugin.PluginsFacade - Setting up plugin manager > mode=prod; embedded=false; plugins-dir=/Users/martinp4/.nextflow/plugins; core-plugins: nf-amazon@1.11.3,nf-azure@0.14.2,nf-codecommit@0.1.2,nf-console@1.0.4,nf-ga4gh@1.0.4,nf-google@1.4.5,nf-tower@1.5.6,nf-wave@0.5.3
Oct-21 12:26:35.789 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Enabled plugins: []
Oct-21 12:26:35.790 [main] INFO  org.pf4j.DefaultPluginStatusProvider - Disabled plugins: []
Oct-21 12:26:35.791 [main] INFO  org.pf4j.DefaultPluginManager - PF4J version 3.4.1 in 'deployment' mode
Oct-21 12:26:35.797 [main] INFO  org.pf4j.AbstractPluginManager - No plugins
Oct-21 12:26:35.807 [main] DEBUG nextflow.config.ConfigBuilder - Found config local: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/nextflow.config
Oct-21 12:26:35.807 [main] DEBUG nextflow.config.ConfigBuilder - Parsing config file: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/nextflow.config
Oct-21 12:26:35.819 [main] DEBUG nextflow.config.ConfigBuilder - Applying config profile: `standard`
Oct-21 12:26:36.203 [main] DEBUG nextflow.cli.CmdRun - Applied DSL=2 from script declararion
Oct-21 12:26:36.206 [main] INFO  nextflow.cli.CmdRun - Launching `main.nf` [gigantic_church] DSL2 - revision: d9f68df7cb
Oct-21 12:26:36.207 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins default=[]
Oct-21 12:26:36.207 [main] DEBUG nextflow.plugin.PluginsFacade - Plugins resolved requirement=[]
Oct-21 12:26:36.215 [main] DEBUG nextflow.secret.LocalSecretsProvider - Secrets store: /Users/martinp4/.nextflow/secrets/store.json
Oct-21 12:26:36.217 [main] DEBUG nextflow.secret.SecretsLoader - Discovered secrets providers: [nextflow.secret.LocalSecretsProvider@2b6a0ea9] - activable => nextflow.secret.LocalSecretsProvider@2b6a0ea9
Oct-21 12:26:36.255 [main] DEBUG nextflow.Session - Session UUID: 4a9b48f3-2e1d-4fd4-90b8-1c9ab72e09a6
Oct-21 12:26:36.255 [main] DEBUG nextflow.Session - Run name: gigantic_church
Oct-21 12:26:36.255 [main] DEBUG nextflow.Session - Executor pool size: 10
Oct-21 12:26:36.260 [main] DEBUG nextflow.util.ThreadPoolBuilder - Creating thread pool 'FileTransfer' minSize=10; maxSize=30; workQueue=LinkedBlockingQueue[10000]; allowCoreThreadTimeout=false
Oct-21 12:26:36.301 [main] DEBUG nextflow.cli.CmdRun - 
  Version: 22.10.6 build 5844
  Created: 23-01-2023 23:25 UTC (15:25 PDT)
  System: Mac OS X 15.7.1
  Runtime: Groovy 3.0.13 on OpenJDK 64-Bit Server VM 17.0.10+7-LTS
  Encoding: UTF-8 (UTF-8)
  Process: 60682@awlpdc540pm [10.226.8.21]
  CPUs: 10 - Mem: 16 GB (86.4 MB) - Swap: 2 GB (657.1 MB)
Oct-21 12:26:36.313 [main] DEBUG nextflow.Session - Work-dir: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/work [Mac OS X]
Oct-21 12:26:36.337 [main] DEBUG nextflow.executor.ExecutorFactory - Extension executors providers=[GoogleLifeSciencesExecutor, AwsBatchExecutor, GoogleBatchExecutor]
Oct-21 12:26:36.344 [main] DEBUG nextflow.Session - Observer factory: DefaultObserverFactory
Oct-21 12:26:36.356 [main] DEBUG nextflow.Session - Observer factory: TowerFactory
Oct-21 12:26:36.365 [main] DEBUG nextflow.cache.CacheFactory - Using Nextflow cache factory: nextflow.cache.DefaultCacheFactory
Oct-21 12:26:36.370 [main] DEBUG nextflow.util.CustomThreadPool - Creating default thread pool > poolSize: 11; maxThreads: 1000
Oct-21 12:26:36.400 [main] DEBUG nextflow.Session - Session start
Oct-21 12:26:36.403 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow started -- trace file: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/logs/trace.txt
Oct-21 12:26:36.410 [main] DEBUG nextflow.Session - Using default localLib path: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/lib
Oct-21 12:26:36.411 [main] DEBUG nextflow.Session - Adding to the classpath library: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/lib
Oct-21 12:26:36.521 [main] DEBUG nextflow.script.ScriptRunner - > Launching execution
Oct-21 12:26:36.845 [main] INFO  nextflow.script.BaseScript - Checking if containters are present and Building...
Oct-21 12:26:36.912 [main] DEBUG nextflow.executor.ExecutorFactory - << taskConfig executor: null
Oct-21 12:26:36.912 [main] DEBUG nextflow.executor.ExecutorFactory - >> processorType: 'local'
Oct-21 12:26:36.915 [main] DEBUG nextflow.executor.Executor - [warm up] executor > local
Oct-21 12:26:36.917 [main] DEBUG n.processor.LocalPollingMonitor - Creating local task monitor for executor 'local' > cpus=10; memory=16 GB; capacity=10; pollInterval=1m; dumpInterval=5m
Oct-21 12:26:36.919 [main] DEBUG n.processor.TaskPollingMonitor - Creating submit rate limit of 1 submissions per 1 seconds
Oct-21 12:26:36.945 [main] DEBUG nextflow.processor.TaskProcessor - Creating *combiner* operator for each param(s) at index(es): [0]
Oct-21 12:26:36.958 [main] DEBUG nextflow.Session - Workflow process names [dsl2]: download_visiumHD, buildContainers, download_stereo, checkAndBuildContainers:buildContainers
Oct-21 12:26:36.959 [main] DEBUG nextflow.Session - Igniting dataflow network (3)
Oct-21 12:26:36.962 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > checkAndBuildContainers:buildContainers
Oct-21 12:26:36.963 [main] DEBUG nextflow.processor.TaskProcessor - Starting process > checkAndBuildContainers:buildContainers
Oct-21 12:26:36.963 [main] DEBUG nextflow.script.ScriptRunner - > Awaiting termination 
Oct-21 12:26:36.963 [main] DEBUG nextflow.Session - Session await
Oct-21 12:26:36.964 [PathVisitor-1] DEBUG nextflow.file.PathVisitor - files for syntax: glob; folder: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/containers/; pattern: *; options: [type:dir]
Oct-21 12:26:37.039 [Task submitter] WARN  nextflow.executor.BashWrapperBuilder - Task runtime metrics are not reported when using macOS without a container engine
Oct-21 12:26:37.134 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Oct-21 12:26:37.135 [Task submitter] INFO  nextflow.Session - [6c/e84828] Submitted process > checkAndBuildContainers:buildContainers (1)
Oct-21 12:26:37.931 [Task submitter] DEBUG n.executor.local.LocalTaskHandler - Launch cmd line: /bin/bash -ue .command.run
Oct-21 12:26:37.932 [Task submitter] INFO  nextflow.Session - [41/98e555] Submitted process > checkAndBuildContainers:buildContainers (2)
Oct-21 12:26:47.291 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 1; name: checkAndBuildContainers:buildContainers (1); status: COMPLETED; exit: 1; error: -; workDir: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/work/6c/e848286892f815c21659359c475175]
Oct-21 12:26:47.301 [Task monitor] ERROR nextflow.processor.TaskProcessor - Error executing process > 'checkAndBuildContainers:buildContainers (1)'

Caused by:
  Process `checkAndBuildContainers:buildContainers (1)` terminated with an error exit status (1)

Command executed:

  mkdir -p /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/container_cache
  
  if [ "true" = "true" ]; then
      imagePath="/Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/container_cache/stereopy.tar"
  
      if [ ! -f "${imagePath}" ]; then
          echo "Building Docker image for stereopy..."
          # Change to containerDir so Docker can find env files in build context
          cd stereopy
          docker build -t stereopy:latest -f Dockerfile .
          docker save stereopy:latest -o ${imagePath}
          echo "Built Docker image for stereopy"
      else
          echo "Docker image for stereopy already exists"
      fi
      ln -s ${imagePath} stereopy.tar
  else
      imagePath="/Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/container_cache/stereopy.sif"
  
      if [ ! -f "${imagePath}" ]; then
          echo "Building apptainer image for stereopy..."
          module load apptainer
          # Change to containerDir so apptainer can find env files
          cd stereopy
          apptainer build --fakeroot ${imagePath} stereopy.def
          echo "Built apptainer image for stereopy"
      else
          echo "Apptainer image for stereopy already exists"
      fi
      ln -s ${imagePath} stereopy.sif
  fi

Command exit status:
  1

Command output:
  Building Docker image for stereopy...

Command error:
  #6 sha256:b9054ad8372fe467ac1b077d6e382c0046823129d4da1ac368074d8b29d06af0 9.13MB / 9.13MB 0.4s done
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 9.44MB / 30.14MB 0.5s
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 14.68MB / 30.14MB 0.6s
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 19.92MB / 30.14MB 0.8s
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 25.17MB / 30.14MB 0.9s
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 30.14MB / 30.14MB 1.1s
  #6 sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 30.14MB / 30.14MB 1.1s done
  #6 extracting sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9
  #6 extracting sha256:9a6263cdeaa5d408640880103ee36920ef814974ca8e2674412ad6460e8968c9 0.5s done
  #6 DONE 1.9s
  
  #6 [1/5] FROM docker.io/mambaorg/micromamba:latest@sha256:3f92db74f6780f60c9a2c6d983c76360a1d4cfdcb597395ab9e64747f067b15b
  #6 extracting sha256:b9054ad8372fe467ac1b077d6e382c0046823129d4da1ac368074d8b29d06af0 0.1s done
  #6 extracting sha256:87cbb6e7ae1297d4c4fe0e798fd8c1172a7a88e0f9886bc229346cedc8de6e68 done
  #6 extracting sha256:8f82a6460334e5f7a5faf1938646b7ca9f74bf82f8d4c30b93713f6902cfaa2e done
  #6 extracting sha256:dadffb479ee8d07450f2114dd763dcbcb80943988b6ecf6ba4cbe0cd1e4a9354 done
  #6 DONE 2.0s
  
  #6 [1/5] FROM docker.io/mambaorg/micromamba:latest@sha256:3f92db74f6780f60c9a2c6d983c76360a1d4cfdcb597395ab9e64747f067b15b
  #6 extracting sha256:55f008f092b19581c64045398e6f7b3749052f81f5375dc02d60e11153cc6097 done
  #6 extracting sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1 done
  #6 extracting sha256:0f3c48c2427f00751bbfe8ad8950ea309bfdd8d9e3f131199ff2c66a27eacd8e done
  #6 extracting sha256:9f9a618abefd21232e914fa978df04e10266a597fd9fabfeb378ee5f1536c9e1 done
  #6 extracting sha256:43e3caa80dad67165101a9349cc3544d2bee5411c02849744b4be634ba062288 done
  #6 DONE 2.1s
  
  #7 [2/5] WORKDIR /app
  #7 DONE 0.1s
  
  #8 [3/5] COPY stereopy.yml /app/stereopy.yml
  #8 DONE 0.0s
  
  #9 [4/5] RUN apt-get update &&     apt-get install -y --no-install-recommends build-essential git &&     rm -rf /var/lib/apt/lists/*
  #9 0.166 Reading package lists...
  #9 0.170 E: List directory /var/lib/apt/lists/partial is missing. - Acquire (13: Permission denied)
  #9 ERROR: process "/usr/local/bin/_dockerfile_shell.sh apt-get update &&     apt-get install -y --no-install-recommends build-essential git &&     rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 100
  ------
   > [4/5] RUN apt-get update &&     apt-get install -y --no-install-recommends build-essential git &&     rm -rf /var/lib/apt/lists/*:
  
  0.170 E: List directory /var/lib/apt/lists/partial is missing. - Acquire (13: Permission denied)
  ------
  Dockerfile:9
  --------------------
     8 |     # Install system dependencies
     9 | >>> RUN apt-get update && \
    10 | >>>     apt-get install -y --no-install-recommends build-essential git && \
    11 | >>>     rm -rf /var/lib/apt/lists/*
    12 |     
  --------------------
  ERROR: failed to build: failed to solve: process "/usr/local/bin/_dockerfile_shell.sh apt-get update &&     apt-get install -y --no-install-recommends build-essential git &&     rm -rf /var/lib/apt/lists/*" did not complete successfully: exit code: 100

Work dir:
  /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/work/6c/e848286892f815c21659359c475175

Tip: view the complete command output by changing to the process work dir and entering the command `cat .command.out`
Oct-21 12:26:47.309 [Task monitor] DEBUG nextflow.Session - Session aborted -- Cause: Process `checkAndBuildContainers:buildContainers (1)` terminated with an error exit status (1)
Oct-21 12:26:47.318 [main] DEBUG nextflow.Session - Session await > all processes finished
Oct-21 12:26:47.318 [main] DEBUG nextflow.Session - Session await > all barriers passed
Oct-21 12:26:47.319 [Task monitor] DEBUG n.processor.TaskPollingMonitor - Task completed > TaskHandler[id: 2; name: checkAndBuildContainers:buildContainers (2); status: COMPLETED; exit: 1; error: -; workDir: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/work/41/98e5556558cd176c899711478b3d92]
Oct-21 12:26:47.320 [main] DEBUG nextflow.trace.WorkflowStatsObserver - Workflow completed > WorkflowStats[succeededCount=0; failedCount=2; ignoredCount=0; cachedCount=0; pendingCount=0; submittedCount=0; runningCount=0; retriesCount=0; abortedCount=0; succeedDuration=0ms; failedDuration=11ms; cachedDuration=0ms;loadCpus=0; loadMemory=0; peakRunning=1; peakCpus=1; peakMemory=0; ]
Oct-21 12:26:47.320 [main] DEBUG nextflow.trace.TraceFileObserver - Workflow completed -- saving trace file
Oct-21 12:26:47.321 [main] DEBUG nextflow.trace.ReportObserver - Workflow completed -- rendering execution report
Oct-21 12:26:47.337 [main] DEBUG nextflow.trace.ReportObserver - Execution report summary data:
  [{"cpuUsage":null,"process":"buildContainers","mem":null,"memUsage":null,"timeUsage":null,"vmem":null,"reads":null,"cpu":null,"time":{"mean":5.5,"min":1,"q1":3.25,"q2":5.5,"q3":7.75,"max":10,"minLabel":"checkAndBuildContainers:buildContainers (2)","maxLabel":"checkAndBuildContainers:buildContainers (1)","q1Label":"checkAndBuildContainers:buildContainers (2)","q2Label":"checkAndBuildContainers:buildContainers (2)","q3Label":"checkAndBuildContainers:buildContainers (2)"},"writes":null}]
Oct-21 12:26:48.167 [main] WARN  nextflow.trace.ReportObserver - Failed to render execution report -- see the log file for details
nextflow.exception.AbortOperationException: Report file already exists: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/logs/report.html -- enable the 'report.overwrite' option in your config file to overwrite existing files
	at nextflow.trace.TraceHelper.newFileWriter(TraceHelper.groovy:66)
	at nextflow.trace.ReportObserver.renderHtml(ReportObserver.groovy:283)
	at nextflow.trace.ReportObserver.onFlowComplete(ReportObserver.groovy:140)
	at nextflow.Session.notifyFlowComplete(Session.groovy:1075)
	at nextflow.Session.shutdown0(Session.groovy:702)
	at nextflow.Session.destroy(Session.groovy:644)
	at nextflow.script.ScriptRunner.shutdown(ScriptRunner.groovy:240)
	at nextflow.script.ScriptRunner.execute(ScriptRunner.groovy:135)
	at nextflow.cli.CmdRun.run(CmdRun.groovy:354)
	at nextflow.cli.Launcher.run(Launcher.groovy:487)
	at nextflow.cli.Launcher.main(Launcher.groovy:646)
Caused by: java.nio.file.FileAlreadyExistsException: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/logs/report.html
	at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:94)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
	at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)
	at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:484)
	at java.base/java.nio.file.Files.newOutputStream(Files.java:228)
	at java.base/java.nio.file.Files.newBufferedWriter(Files.java:3008)
	at nextflow.trace.TraceHelper.newFileWriter(TraceHelper.groovy:63)
	... 10 common frames omitted
Oct-21 12:26:48.167 [main] DEBUG nextflow.trace.TimelineObserver - Workflow completed -- rendering execution timeline
Oct-21 12:26:48.247 [main] WARN  nextflow.trace.TimelineObserver - Failed to render execution timeline -- see the log file for details
nextflow.exception.AbortOperationException: Timeline file already exists: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/logs/timeline.html -- enable the 'timeline.overwrite' option in your config file to overwrite existing files
	at nextflow.trace.TraceHelper.newFileWriter(TraceHelper.groovy:66)
	at nextflow.trace.TimelineObserver.renderHtml(TimelineObserver.groovy:176)
	at nextflow.trace.TimelineObserver.onFlowComplete(TimelineObserver.groovy:85)
	at nextflow.Session.notifyFlowComplete(Session.groovy:1075)
	at nextflow.Session.shutdown0(Session.groovy:702)
	at nextflow.Session.destroy(Session.groovy:644)
	at nextflow.script.ScriptRunner.shutdown(ScriptRunner.groovy:240)
	at nextflow.script.ScriptRunner.execute(ScriptRunner.groovy:135)
	at nextflow.cli.CmdRun.run(CmdRun.groovy:354)
	at nextflow.cli.Launcher.run(Launcher.groovy:487)
	at nextflow.cli.Launcher.main(Launcher.groovy:646)
Caused by: java.nio.file.FileAlreadyExistsException: /Users/martinp4/Documents/Cedars/SPIX/pipeline/scSPIX_analysis/logs/timeline.html
	at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:94)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:106)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
	at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:218)
	at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:484)
	at java.base/java.nio.file.Files.newOutputStream(Files.java:228)
	at java.base/java.nio.file.Files.newBufferedWriter(Files.java:3008)
	at nextflow.trace.TraceHelper.newFileWriter(TraceHelper.groovy:63)
	... 10 common frames omitted
Oct-21 12:26:48.286 [main] WARN  nextflow.dag.GraphvizRenderer - Graphviz is required to render the execution DAG in the given format -- See http://www.graphviz.org for more info.
Oct-21 12:26:48.294 [main] DEBUG nextflow.cache.CacheDB - Closing CacheDB done
Oct-21 12:26:48.303 [main] DEBUG nextflow.script.ScriptRunner - > Execution complete -- Goodbye
